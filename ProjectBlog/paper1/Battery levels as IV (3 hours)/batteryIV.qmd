---
title: "Instrument Variable for Screen Time"
date: 03/19/2024
date-modified: last-modified
date-format: full
categories: [Paper1]
format:
  html:
    code-overflow: wrap
comments:
  hypothesis: true
#bibliography: references.bib
---

# Social Network Control

![](images/clipboard-3769634593.png){fig-align="center"}

``` python
global id egoid
global t date2
global ylist sleep_debt
global mainIV  c.screen_time##c.screen_time  message_q c.screen_time#c.message_q unlock
global Call_Control call duration_x length bytes
global Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100
global Network_Control friend_no parent_no  sibling_no  blank_no    otherfamily_no  romanticpartner_no  acquaintance_no neighbor_no coworker_no stepsibling_no  comemberorganization_no stepparent_no degree_centrality core_number trust position num_nodes num_edges duration_y contacts_y
global Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour
global fe i.studyweeks

*Set data as panel data
sort $id $t
xtset $id $t

xtreg $ylist  $fe $Fitness_Control $Network_Control $Other_Control $mainIV $Call_Control call, fe robust
outreg2 using 3hour.xls, append dec(5) addtext(Turning Point, Yes) keep($mainIV $Network_Control) title("Impact of Smartphone Use On Sleep Debt")
```

In this update, we try to find an instrument variable to justify the causal effect of screen time on sleep debt. First, we introduce the related variables:

```{python}
#| echo: false
#| warning: false
#| output: true
import time;import pandas as pd;import numpy as np;import datetime
from datetime import datetime;from datetime import timedelta;import sqlite3;import warnings
import matplotlib.pyplot as plt;import seaborn as sns;warnings.filterwarnings('ignore')

df=pd.read_csv("/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/bt7_3hr.csv")

df[['egoid','count_begin3','battery','battery_time','charging','binterval']]
```

# Instrument Variable for Screen Time
## Charging as Instrument Variable

### Impact of Battery Level on Screen Use

![](images/clipboard-2236990828.png){fig-align="center"}

![](images/clipboard-3667078777.png){fig-align="center"}

![](images/clipboard-3413638920.png){fig-align="center"}

![](images/clipboard-2256328779.png){fig-align="center" width="963"}

![](images/clipboard-617947198.png){fig-align="center"}

The figures show that charging may positively impact screen time. I tried to take charging as IV for screen time, however, the estimated coefficient is not significant, although it passed the relevance test:

Before Turning Point:

![](images/image.png){fig-align="center"}

![](images/image (1).png){fig-align="center"}

After Turning Point:

![](images/image (2).png){fig-align="center"}

![](images/image (3).png){fig-align="center"}

## Battery as Instrument Variable

### Impact of Battery Level on Screen Use

![](images/clipboard-1091683936.png){fig-align="center"}

![](images/clipboard-1091683936.png){fig-align="center"}

#### Visualization of the U-Shape Impact

![](images/battery.png){fig-align="center"}

``` python

clear all
set maxvar 120000, permanently
set more off

import delimited "/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/bt7_3hr.csv"
gen date2 = date(date, "YMD")
**********************************************
global id egoid
global t date2
global ylist sleep_debt
global mainIV  c.screen_time##c.screen_time  message_q c.screen_time#c.message_q unlock
global Call_Control call duration_x length bytes
global Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100
global Network_Control friend_no parent_no  sibling_no  blank_no    otherfamily_no  romanticpartner_no  acquaintance_no neighbor_no coworker_no stepsibling_no  comemberorganization_no stepparent_no degree_centrality core_number trust position num_nodes num_edges duration_y contacts_y
global Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour
global fe i.studyweeks

*Set data as panel data
sort $id $t
xtset $id $t

ivreghdfe $ylist $Fitness_Control $Network_Control $Other_Control $Call_Contro message_q unlock charging (c.screen_time##c.screen_time=c.battery##c.battery), absorb(egoid studyweeks) robust endog(screen_time)
```

#### Impact of Screen Time on Sleep Debt

![](images/clipboard-2139860948.png){fig-align="center"}

### Evaluation of IV

![](images/clipboard-3440018871.png){fig-align="center"}

1.  **Underidentification Test (Kleibergen-Paap rk LM Statistic):**

    -   This test checks whether the instruments are correlated with the endogenous regressorsâ€”in the case, whether 'battery_levels' is correlated with 'screen_time' and 'screen_time\^2'. A failure to reject the null hypothesis would indicate that the instruments are not relevant, and hence the model is underidentified (meaning t**he IV approach cannot be validly used**).

    -   In the results, the Kleibergen-Paap rk LM statistic is 105.271 with a p-value of 0.0000, indicating strong rejection of the null hypothesis of underidentification. This means the **instruments are likely relevant**.

2.  **Weak Identification Tests (Cragg-Donald Wald F statistic and Kleibergen-Paap rk Wald F statistic):**

    -   These tests check whether the instruments are sufficiently correlated with the endogenous regressors. While the instruments may be correlated (not underidentified), they might not be strong enough to provide reliable estimates (weak instruments).

    -   The critical values provided by Stock and Yogo help determine whether the instruments are weak. If the test statistic (Cragg-Donald or Kleibergen-Paap) is above the critical value for a given maximal IV size (size of a test for a given level of IV bias), **the instruments are not considered weak**.

    -   In the case, the Cragg-Donald Wald F statistic is 57.995, and the Kleibergen-Paap rk Wald F statistic is 52.396. These are both above the highest listed Stock-Yogo critical value of 7.03 for a maximal IV size of 10%. This indicates that the instrument is not weak according to the Stock-Yogo weak identification test standards.

**Interpretation:**

-   The underidentification test indicates that the model is properly identified, meaning that there is a statistical relationship between the instruments and the endogenous variables.

-   The weak identification tests suggest that the **instruments are strong**, as indicated by the test statistics significantly exceeding the Stock-Yogo critical values.

Therefore, based on these diagnostics, it appears that the instrument (battery levels) is both relevant (related to the endogenous variable screen time) and strong (provides sufficient information to estimate the causal effect reliably). This lends credibility to the IV estimates obtained from the model. However, remember that these tests do not address other potential issues such as exogeneity (whether the instruments are correlated with the error term) and overidentification (having more instruments than endogenous variables, which can be tested with a different set of tests). Always consider the theoretical justification for the instruments in addition to these statistical tests.

### Battery IV with Turning Point

#### IV Before Turning Point

![](images/clipboard-769146924.png){fig-align="center"}

![](images/clipboard-1425622386.png){fig-align="center"}

#### IV After Turning Point

# Alternative IVs: Number of Contacts

![](images/clipboard-2448270006.png)
