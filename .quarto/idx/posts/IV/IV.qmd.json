{"title":"Instrument Variable for Screen Time","markdown":{"yaml":{"title":"Instrument Variable for Screen Time","date":"02/06/2024","date-modified":"last-modified","date-format":"full","categories":["Paper1"],"format":{"html":{"page-layout":"full","code-overflow":"wrap"}},"comments":{"hypothesis":true},"bibliography":"references.bib"},"headingText":"Empiricial Strategy","containsRefs":false,"markdown":"\n\nIn this update, we try to find an instrument variable to justify the causal effect of screen time on sleep debt. First, we introduce the related variables:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\nimport time;import pandas as pd;import numpy as np;import datetime\nfrom datetime import datetime;from datetime import timedelta;import sqlite3;import warnings\nimport matplotlib.pyplot as plt;import seaborn as sns;warnings.filterwarnings('ignore')\n\ndf=pd.read_csv(\"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/bt7_1.5r.csv\")\n\ndf[['egoid','count_begin90', 'time_fallsleep','battery','battery_time','charging','binterval']]\n```\n\n-   **egoid:** individual identifier\n\n-   **count_begin90:** starting time of measurement window of 90 minutes\n\n-   **time_fallsleep:** time of falling asleep for an egoid on a certain day\n\n-   **battery:** battery level at the closest measuring point before the starting point of measurement window, namely \"**count_begin90\"**\n\n-   **battery_time:** the measuring time point of battery level. We only maintain the observations with '**battery_time' that is within 30 minutes from 'time_fallsleep'** for the purpose of measurement accuracy\n\n-   **charging:** dummy indicating the charging status of smartphone at time 'battery_time' with **'1' for charging and '0' for unpluged**\n\n-   **binterval:** the time interval (minutes) between 'battery_time' and 'count_begin90'\n\nThe following table shows descriptive statistics:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\n\ndf[['egoid','count_begin90', 'time_fallsleep','battery','charging','battery_time','binterval']].describe()\n```\n\nWe speculate that the charging status is positively associated with screen time as one may need to charge his/her phone if the user anticipate that he/she was going to use smartphone intensively in the next 90 minutes. To examine whether \"charging\" could work as and instrument variable for 'screen time\", we first regress \"screen time\" on \"charging\". Since our earlier results show that screen time has U-shape impact on sleep debt, we divide the data into two subgroups based on the turning point of screen time.\n\nHere is the descriptive statistics for observations before turning point:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\ndf=pd.read_csv(\"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/df7_22-5s.csv\")\ndf[['egoid','screen_time', 'unlock','message','count_begin90', 'time_fallsleep','battery','charging','battery_time','binterval']].describe()\n```\n\nThe following table shows the descriptive statistics for observations after turning point:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\ndf=pd.read_csv(\"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/df7_22-5b.csv\")\ndf[['egoid','screen_time', 'unlock','message','count_begin90', 'time_fallsleep','battery','charging','battery_time','binterval']].describe()\n```\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: false\nimport time;import pandas as pd;import numpy as np ;import datetime\nfrom datetime import datetime;from datetime import timedelta;import stata_setup\nstata_setup.config('/Applications/Stata', 'mp')\n```\n\n\n### Screen Time \\< Turning Point\n\nWe first check whether charging status could work as an instrument variable for screen time for observations with screen time \\< turning point (50 minutes)\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n#| echo: true\nclear all\nset maxvar 120000, permanently\nset more off\n\nimport delimited \"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/df7_22-5s.csv\"\ngen date2 = date(date, \"YMD\")\n```\n\n### **First Stage: Test the Relevance of the Instrument**\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time iimessage unlock\nglobal Call_Control call duration length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour c.studyweeks#id\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nregress screen_time charging battery $fe $Fitness_Control $Other_Control $Call_Control message unlock i.egoid\n\n```\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: true\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nesttab, keep(charging battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\nThe results shows charging status is positively associated with screen time. Moreover, the F-statistics of 35.34 indicate that 'charging' is a valid IV for screen time.\n\n#### **IV Estimation**\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nivregress 2sls sleep_debt (screen_time = charging) $fe $Fitness_Control $Other_Control $Call_Control i.egoid message unlock battery\n```\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: true\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nesttab, keep(screen_time battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\nThe IV estimation results suggest that screen time reduces sleep debt when screen time \\< turning point. \\### Screen Time \\> Turning Point\n\nWe first check whether charging status could work as an instrument variable for screen time for observations with screen time \\< turning point (50 minutes)\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n#| echo: true\nclear all\nset maxvar 120000, permanently\nset more off\n\nimport delimited \"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/df7_22-5b.csv\"\ngen date2 = date(date, \"YMD\")\n```\n\n### **First Stage: Test the Relevance of the Instrument**\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time iimessage unlock\nglobal Call_Control call duration length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour c.studyweeks#id\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nregress screen_time charging battery $fe $Fitness_Control $Other_Control $Call_Control message unlock i.egoid\n\n```\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: true\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nesttab, keep(charging battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\nThe results shows charging status is positively associated with screen time, indicating that 'charging' is a valid IV for screen time.\n\n#### **IV Estimation**\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nivregress 2sls sleep_debt (screen_time = charging) $fe $Fitness_Control $Other_Control $Call_Control i.egoid message unlock battery\n```\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: true\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nesttab, keep(screen_time battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\nThe estimation for screen time is significant when p\\<0.1 although not significant when p\\<0.05. The IV estimation results suggest that screen time increases sleep debt when screen time \\> turning point.\n","srcMarkdownNoYaml":"\n\nIn this update, we try to find an instrument variable to justify the causal effect of screen time on sleep debt. First, we introduce the related variables:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\nimport time;import pandas as pd;import numpy as np;import datetime\nfrom datetime import datetime;from datetime import timedelta;import sqlite3;import warnings\nimport matplotlib.pyplot as plt;import seaborn as sns;warnings.filterwarnings('ignore')\n\ndf=pd.read_csv(\"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/bt7_1.5r.csv\")\n\ndf[['egoid','count_begin90', 'time_fallsleep','battery','battery_time','charging','binterval']]\n```\n\n-   **egoid:** individual identifier\n\n-   **count_begin90:** starting time of measurement window of 90 minutes\n\n-   **time_fallsleep:** time of falling asleep for an egoid on a certain day\n\n-   **battery:** battery level at the closest measuring point before the starting point of measurement window, namely \"**count_begin90\"**\n\n-   **battery_time:** the measuring time point of battery level. We only maintain the observations with '**battery_time' that is within 30 minutes from 'time_fallsleep'** for the purpose of measurement accuracy\n\n-   **charging:** dummy indicating the charging status of smartphone at time 'battery_time' with **'1' for charging and '0' for unpluged**\n\n-   **binterval:** the time interval (minutes) between 'battery_time' and 'count_begin90'\n\nThe following table shows descriptive statistics:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\n\ndf[['egoid','count_begin90', 'time_fallsleep','battery','charging','battery_time','binterval']].describe()\n```\n\nWe speculate that the charging status is positively associated with screen time as one may need to charge his/her phone if the user anticipate that he/she was going to use smartphone intensively in the next 90 minutes. To examine whether \"charging\" could work as and instrument variable for 'screen time\", we first regress \"screen time\" on \"charging\". Since our earlier results show that screen time has U-shape impact on sleep debt, we divide the data into two subgroups based on the turning point of screen time.\n\nHere is the descriptive statistics for observations before turning point:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\ndf=pd.read_csv(\"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/df7_22-5s.csv\")\ndf[['egoid','screen_time', 'unlock','message','count_begin90', 'time_fallsleep','battery','charging','battery_time','binterval']].describe()\n```\n\nThe following table shows the descriptive statistics for observations after turning point:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\ndf=pd.read_csv(\"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/df7_22-5b.csv\")\ndf[['egoid','screen_time', 'unlock','message','count_begin90', 'time_fallsleep','battery','charging','battery_time','binterval']].describe()\n```\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: false\nimport time;import pandas as pd;import numpy as np ;import datetime\nfrom datetime import datetime;from datetime import timedelta;import stata_setup\nstata_setup.config('/Applications/Stata', 'mp')\n```\n\n## Empiricial Strategy\n\n### Screen Time \\< Turning Point\n\nWe first check whether charging status could work as an instrument variable for screen time for observations with screen time \\< turning point (50 minutes)\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n#| echo: true\nclear all\nset maxvar 120000, permanently\nset more off\n\nimport delimited \"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/df7_22-5s.csv\"\ngen date2 = date(date, \"YMD\")\n```\n\n### **First Stage: Test the Relevance of the Instrument**\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time iimessage unlock\nglobal Call_Control call duration length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour c.studyweeks#id\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nregress screen_time charging battery $fe $Fitness_Control $Other_Control $Call_Control message unlock i.egoid\n\n```\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: true\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nesttab, keep(charging battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\nThe results shows charging status is positively associated with screen time. Moreover, the F-statistics of 35.34 indicate that 'charging' is a valid IV for screen time.\n\n#### **IV Estimation**\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nivregress 2sls sleep_debt (screen_time = charging) $fe $Fitness_Control $Other_Control $Call_Control i.egoid message unlock battery\n```\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: true\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nesttab, keep(screen_time battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\nThe IV estimation results suggest that screen time reduces sleep debt when screen time \\< turning point. \\### Screen Time \\> Turning Point\n\nWe first check whether charging status could work as an instrument variable for screen time for observations with screen time \\< turning point (50 minutes)\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n#| echo: true\nclear all\nset maxvar 120000, permanently\nset more off\n\nimport delimited \"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/df7_22-5b.csv\"\ngen date2 = date(date, \"YMD\")\n```\n\n### **First Stage: Test the Relevance of the Instrument**\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time iimessage unlock\nglobal Call_Control call duration length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour c.studyweeks#id\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nregress screen_time charging battery $fe $Fitness_Control $Other_Control $Call_Control message unlock i.egoid\n\n```\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: true\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nesttab, keep(charging battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\nThe results shows charging status is positively associated with screen time, indicating that 'charging' is a valid IV for screen time.\n\n#### **IV Estimation**\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: false\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nivregress 2sls sleep_debt (screen_time = charging) $fe $Fitness_Control $Other_Control $Call_Control i.egoid message unlock battery\n```\n\n```{python}\n#| echo: true\n#| warning: false\n#| output: true\n#| code-fold: false\n#| code-overflow: wrap\n%%stata\n\nesttab, keep(screen_time battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\nThe estimation for screen time is significant when p\\<0.1 although not significant when p\\<0.05. The IV estimation results suggest that screen time increases sleep debt when screen time \\> turning point.\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"number-sections":true,"output-file":"IV.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","resource-files":["pdfs/*"],"body-header":"This page brought to you by <https://example.com>\n","theme":"cosmo","grid":{"sidebar-width":"350px"},"title-block-banner":true,"title":"Instrument Variable for Screen Time","date":"02/06/2024","date-modified":"last-modified","date-format":"full","categories":["Paper1"],"comments":{"hypothesis":true},"bibliography":["references.bib"],"page-layout":"full"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}