{"title":"Instrument Variable for Screen Time","markdown":{"yaml":{"title":"Instrument Variable for Screen Time","date":"03/19/2024","date-modified":"last-modified","date-format":"full","categories":["Paper1"],"format":{"html":{"code-overflow":"wrap"}},"comments":{"hypothesis":true}},"headingText":"Social Network Control","containsRefs":false,"markdown":"\n\n\n![](images/clipboard-3769634593.png){fig-align=\"center\"}\n\n``` python\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time  message_q c.screen_time#c.message_q unlock\nglobal Call_Control call duration_x length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Network_Control friend_no parent_no  sibling_no  blank_no    otherfamily_no  romanticpartner_no  acquaintance_no neighbor_no coworker_no stepsibling_no  comemberorganization_no stepparent_no degree_centrality core_number trust position num_nodes num_edges duration_y contacts_y\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nxtreg $ylist  $fe $Fitness_Control $Network_Control $Other_Control $mainIV $Call_Control call, fe robust\noutreg2 using 3hour.xls, append dec(5) addtext(Turning Point, Yes) keep($mainIV $Network_Control) title(\"Impact of Smartphone Use On Sleep Debt\")\n```\n\nIn this update, we try to find an instrument variable to justify the causal effect of screen time on sleep debt. First, we introduce the related variables:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\nimport time;import pandas as pd;import numpy as np;import datetime\nfrom datetime import datetime;from datetime import timedelta;import sqlite3;import warnings\nimport matplotlib.pyplot as plt;import seaborn as sns;warnings.filterwarnings('ignore')\n\ndf=pd.read_csv(\"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/bt7_3hr.csv\")\n\ndf[['egoid','count_begin3','battery','battery_time','charging','binterval']]\n```\n\n# Instrument Variable for Screen Time\n## Charging as Instrument Variable\n\n### Impact of Battery Level on Screen Use\n\n![](images/clipboard-2236990828.png){fig-align=\"center\"}\n\n![](images/clipboard-3667078777.png){fig-align=\"center\"}\n\n![](images/clipboard-3413638920.png){fig-align=\"center\"}\n\n![](images/clipboard-2256328779.png){fig-align=\"center\" width=\"963\"}\n\n![](images/clipboard-617947198.png){fig-align=\"center\"}\n\nThe figures show that charging may positively impact screen time. I tried to take charging as IV for screen time, however, the estimated coefficient is not significant, although it passed the relevance test:\n\nBefore Turning Point:\n\n![](images/image.png){fig-align=\"center\"}\n\n![](images/image (1).png){fig-align=\"center\"}\n\nAfter Turning Point:\n\n![](images/image (2).png){fig-align=\"center\"}\n\n![](images/image (3).png){fig-align=\"center\"}\n\n## Battery as Instrument Variable\n\n### Impact of Battery Level on Screen Use\n\n![](images/clipboard-1091683936.png){fig-align=\"center\"}\n\n![](images/clipboard-1091683936.png){fig-align=\"center\"}\n\n#### Visualization of the U-Shape Impact\n\n![](images/battery.png){fig-align=\"center\"}\n\n``` python\n\nclear all\nset maxvar 120000, permanently\nset more off\n\nimport delimited \"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/bt7_3hr.csv\"\ngen date2 = date(date, \"YMD\")\n**********************************************\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time  message_q c.screen_time#c.message_q unlock\nglobal Call_Control call duration_x length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Network_Control friend_no parent_no  sibling_no  blank_no    otherfamily_no  romanticpartner_no  acquaintance_no neighbor_no coworker_no stepsibling_no  comemberorganization_no stepparent_no degree_centrality core_number trust position num_nodes num_edges duration_y contacts_y\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nivreghdfe $ylist $Fitness_Control $Network_Control $Other_Control $Call_Contro message_q unlock charging (c.screen_time##c.screen_time=c.battery##c.battery), absorb(egoid studyweeks) robust endog(screen_time)\n```\n\n#### Impact of Screen Time on Sleep Debt\n\n![](images/clipboard-2139860948.png){fig-align=\"center\"}\n\n### Evaluation of IV\n\n![](images/clipboard-3440018871.png){fig-align=\"center\"}\n\n1.  **Underidentification Test (Kleibergen-Paap rk LM Statistic):**\n\n    -   This test checks whether the instruments are correlated with the endogenous regressorsâ€”in the case, whether 'battery_levels' is correlated with 'screen_time' and 'screen_time\\^2'. A failure to reject the null hypothesis would indicate that the instruments are not relevant, and hence the model is underidentified (meaning t**he IV approach cannot be validly used**).\n\n    -   In the results, the Kleibergen-Paap rk LM statistic is 105.271 with a p-value of 0.0000, indicating strong rejection of the null hypothesis of underidentification. This means the **instruments are likely relevant**.\n\n2.  **Weak Identification Tests (Cragg-Donald Wald F statistic and Kleibergen-Paap rk Wald F statistic):**\n\n    -   These tests check whether the instruments are sufficiently correlated with the endogenous regressors. While the instruments may be correlated (not underidentified), they might not be strong enough to provide reliable estimates (weak instruments).\n\n    -   The critical values provided by Stock and Yogo help determine whether the instruments are weak. If the test statistic (Cragg-Donald or Kleibergen-Paap) is above the critical value for a given maximal IV size (size of a test for a given level of IV bias), **the instruments are not considered weak**.\n\n    -   In the case, the Cragg-Donald Wald F statistic is 57.995, and the Kleibergen-Paap rk Wald F statistic is 52.396. These are both above the highest listed Stock-Yogo critical value of 7.03 for a maximal IV size of 10%. This indicates that the instrument is not weak according to the Stock-Yogo weak identification test standards.\n\n**Interpretation:**\n\n-   The underidentification test indicates that the model is properly identified, meaning that there is a statistical relationship between the instruments and the endogenous variables.\n\n-   The weak identification tests suggest that the **instruments are strong**, as indicated by the test statistics significantly exceeding the Stock-Yogo critical values.\n\nTherefore, based on these diagnostics, it appears that the instrument (battery levels) is both relevant (related to the endogenous variable screen time) and strong (provides sufficient information to estimate the causal effect reliably). This lends credibility to the IV estimates obtained from the model. However, remember that these tests do not address other potential issues such as exogeneity (whether the instruments are correlated with the error term) and overidentification (having more instruments than endogenous variables, which can be tested with a different set of tests). Always consider the theoretical justification for the instruments in addition to these statistical tests.\n\n### Battery IV with Turning Point\n\n#### IV Before Turning Point\n\n![](images/clipboard-769146924.png){fig-align=\"center\"}\n\n![](images/clipboard-1425622386.png){fig-align=\"center\"}\n\n#### IV After Turning Point\n\n# Alternative IVs: Number of Contacts\n\n![](images/clipboard-2448270006.png)\n","srcMarkdownNoYaml":"\n\n# Social Network Control\n\n![](images/clipboard-3769634593.png){fig-align=\"center\"}\n\n``` python\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time  message_q c.screen_time#c.message_q unlock\nglobal Call_Control call duration_x length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Network_Control friend_no parent_no  sibling_no  blank_no    otherfamily_no  romanticpartner_no  acquaintance_no neighbor_no coworker_no stepsibling_no  comemberorganization_no stepparent_no degree_centrality core_number trust position num_nodes num_edges duration_y contacts_y\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nxtreg $ylist  $fe $Fitness_Control $Network_Control $Other_Control $mainIV $Call_Control call, fe robust\noutreg2 using 3hour.xls, append dec(5) addtext(Turning Point, Yes) keep($mainIV $Network_Control) title(\"Impact of Smartphone Use On Sleep Debt\")\n```\n\nIn this update, we try to find an instrument variable to justify the causal effect of screen time on sleep debt. First, we introduce the related variables:\n\n```{python}\n#| echo: false\n#| warning: false\n#| output: true\nimport time;import pandas as pd;import numpy as np;import datetime\nfrom datetime import datetime;from datetime import timedelta;import sqlite3;import warnings\nimport matplotlib.pyplot as plt;import seaborn as sns;warnings.filterwarnings('ignore')\n\ndf=pd.read_csv(\"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/bt7_3hr.csv\")\n\ndf[['egoid','count_begin3','battery','battery_time','charging','binterval']]\n```\n\n# Instrument Variable for Screen Time\n## Charging as Instrument Variable\n\n### Impact of Battery Level on Screen Use\n\n![](images/clipboard-2236990828.png){fig-align=\"center\"}\n\n![](images/clipboard-3667078777.png){fig-align=\"center\"}\n\n![](images/clipboard-3413638920.png){fig-align=\"center\"}\n\n![](images/clipboard-2256328779.png){fig-align=\"center\" width=\"963\"}\n\n![](images/clipboard-617947198.png){fig-align=\"center\"}\n\nThe figures show that charging may positively impact screen time. I tried to take charging as IV for screen time, however, the estimated coefficient is not significant, although it passed the relevance test:\n\nBefore Turning Point:\n\n![](images/image.png){fig-align=\"center\"}\n\n![](images/image (1).png){fig-align=\"center\"}\n\nAfter Turning Point:\n\n![](images/image (2).png){fig-align=\"center\"}\n\n![](images/image (3).png){fig-align=\"center\"}\n\n## Battery as Instrument Variable\n\n### Impact of Battery Level on Screen Use\n\n![](images/clipboard-1091683936.png){fig-align=\"center\"}\n\n![](images/clipboard-1091683936.png){fig-align=\"center\"}\n\n#### Visualization of the U-Shape Impact\n\n![](images/battery.png){fig-align=\"center\"}\n\n``` python\n\nclear all\nset maxvar 120000, permanently\nset more off\n\nimport delimited \"/Users/shaokangyang/Library/CloudStorage/OneDrive-Personal/Nethealth/Data/CNSA/combine/7/bt7_3hr.csv\"\ngen date2 = date(date, \"YMD\")\n**********************************************\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time  message_q c.screen_time#c.message_q unlock\nglobal Call_Control call duration_x length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Network_Control friend_no parent_no  sibling_no  blank_no    otherfamily_no  romanticpartner_no  acquaintance_no neighbor_no coworker_no stepsibling_no  comemberorganization_no stepparent_no degree_centrality core_number trust position num_nodes num_edges duration_y contacts_y\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nivreghdfe $ylist $Fitness_Control $Network_Control $Other_Control $Call_Contro message_q unlock charging (c.screen_time##c.screen_time=c.battery##c.battery), absorb(egoid studyweeks) robust endog(screen_time)\n```\n\n#### Impact of Screen Time on Sleep Debt\n\n![](images/clipboard-2139860948.png){fig-align=\"center\"}\n\n### Evaluation of IV\n\n![](images/clipboard-3440018871.png){fig-align=\"center\"}\n\n1.  **Underidentification Test (Kleibergen-Paap rk LM Statistic):**\n\n    -   This test checks whether the instruments are correlated with the endogenous regressorsâ€”in the case, whether 'battery_levels' is correlated with 'screen_time' and 'screen_time\\^2'. A failure to reject the null hypothesis would indicate that the instruments are not relevant, and hence the model is underidentified (meaning t**he IV approach cannot be validly used**).\n\n    -   In the results, the Kleibergen-Paap rk LM statistic is 105.271 with a p-value of 0.0000, indicating strong rejection of the null hypothesis of underidentification. This means the **instruments are likely relevant**.\n\n2.  **Weak Identification Tests (Cragg-Donald Wald F statistic and Kleibergen-Paap rk Wald F statistic):**\n\n    -   These tests check whether the instruments are sufficiently correlated with the endogenous regressors. While the instruments may be correlated (not underidentified), they might not be strong enough to provide reliable estimates (weak instruments).\n\n    -   The critical values provided by Stock and Yogo help determine whether the instruments are weak. If the test statistic (Cragg-Donald or Kleibergen-Paap) is above the critical value for a given maximal IV size (size of a test for a given level of IV bias), **the instruments are not considered weak**.\n\n    -   In the case, the Cragg-Donald Wald F statistic is 57.995, and the Kleibergen-Paap rk Wald F statistic is 52.396. These are both above the highest listed Stock-Yogo critical value of 7.03 for a maximal IV size of 10%. This indicates that the instrument is not weak according to the Stock-Yogo weak identification test standards.\n\n**Interpretation:**\n\n-   The underidentification test indicates that the model is properly identified, meaning that there is a statistical relationship between the instruments and the endogenous variables.\n\n-   The weak identification tests suggest that the **instruments are strong**, as indicated by the test statistics significantly exceeding the Stock-Yogo critical values.\n\nTherefore, based on these diagnostics, it appears that the instrument (battery levels) is both relevant (related to the endogenous variable screen time) and strong (provides sufficient information to estimate the causal effect reliably). This lends credibility to the IV estimates obtained from the model. However, remember that these tests do not address other potential issues such as exogeneity (whether the instruments are correlated with the error term) and overidentification (having more instruments than endogenous variables, which can be tested with a different set of tests). Always consider the theoretical justification for the instruments in addition to these statistical tests.\n\n### Battery IV with Turning Point\n\n#### IV Before Turning Point\n\n![](images/clipboard-769146924.png){fig-align=\"center\"}\n\n![](images/clipboard-1425622386.png){fig-align=\"center\"}\n\n#### IV After Turning Point\n\n# Alternative IVs: Number of Contacts\n\n![](images/clipboard-2448270006.png)\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":true,"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"jupyter"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"wrap","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"number-sections":true,"output-file":"batteryIV.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.450","resource-files":["pdfs/*"],"body-header":"This page brought to you by <https://example.com>\n","theme":"cosmo","grid":{"sidebar-width":"350px"},"title-block-banner":true,"title":"Instrument Variable for Screen Time","date":"03/19/2024","date-modified":"last-modified","date-format":"full","categories":["Paper1"],"comments":{"hypothesis":true}},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}