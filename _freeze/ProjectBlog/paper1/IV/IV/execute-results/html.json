{
  "hash": "b730d935728c3ab0de4005117a1f5407",
  "result": {
    "markdown": "---\ntitle: \"Instrument Variable for Screen Time\"\ndate: 02/06/2024\ndate-modified: last-modified\ndate-format: full\ncategories: [Paper1]\nformat:\n  html:\n    page-layout: full\n    code-overflow: wrap\ncomments:\n  hypothesis: true\nbibliography: references.bib\n---\n\nIn this update, we try to find an instrument variable to justify the causal effect of screen time on sleep debt. First, we introduce the related variables:\n\n::: {.cell execution_count=1}\n\n::: {.cell-output .cell-output-display execution_count=1}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>egoid</th>\n      <th>count_begin90</th>\n      <th>time_fallsleep</th>\n      <th>battery</th>\n      <th>battery_time</th>\n      <th>charging</th>\n      <th>binterval</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>92339</td>\n      <td>2016-07-12 23:48:30</td>\n      <td>2016-07-13 01:18:30</td>\n      <td>21.0</td>\n      <td>2016-07-12 23:31:57.242</td>\n      <td>0.0</td>\n      <td>16.545967</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>92339</td>\n      <td>2016-07-13 22:28:00</td>\n      <td>2016-07-14 00:49:00</td>\n      <td>4.0</td>\n      <td>2016-07-13 22:27:19.793</td>\n      <td>0.0</td>\n      <td>0.670117</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>92339</td>\n      <td>2016-07-14 22:18:00</td>\n      <td>2016-07-14 23:48:00</td>\n      <td>18.0</td>\n      <td>2016-07-14 22:15:33.782</td>\n      <td>0.0</td>\n      <td>2.436967</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>92339</td>\n      <td>2016-07-18 21:46:00</td>\n      <td>2016-07-19 00:19:00</td>\n      <td>48.0</td>\n      <td>2016-07-18 21:45:27.054</td>\n      <td>1.0</td>\n      <td>0.549100</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>92339</td>\n      <td>2016-07-19 22:16:00</td>\n      <td>2016-07-19 23:46:00</td>\n      <td>54.0</td>\n      <td>2016-07-19 22:06:40.374</td>\n      <td>0.0</td>\n      <td>9.327100</td>\n    </tr>\n    <tr>\n      <th>...</th>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n      <td>...</td>\n    </tr>\n    <tr>\n      <th>98134</th>\n      <td>79395</td>\n      <td>2017-08-03 22:36:30</td>\n      <td>2017-08-04 00:06:30</td>\n      <td>46.0</td>\n      <td>2017-08-03 22:24:07.579</td>\n      <td>0.0</td>\n      <td>12.373683</td>\n    </tr>\n    <tr>\n      <th>98135</th>\n      <td>79395</td>\n      <td>2017-08-07 22:11:00</td>\n      <td>2017-08-07 23:41:00</td>\n      <td>91.0</td>\n      <td>2017-08-07 22:09:25.403</td>\n      <td>1.0</td>\n      <td>1.576617</td>\n    </tr>\n    <tr>\n      <th>98136</th>\n      <td>79395</td>\n      <td>2017-08-10 22:42:30</td>\n      <td>2017-08-11 00:33:30</td>\n      <td>81.0</td>\n      <td>2017-08-10 22:38:19.730</td>\n      <td>0.0</td>\n      <td>4.171167</td>\n    </tr>\n    <tr>\n      <th>98137</th>\n      <td>79395</td>\n      <td>2017-08-13 21:47:00</td>\n      <td>2017-08-13 23:17:00</td>\n      <td>92.0</td>\n      <td>2017-08-13 21:34:44.771</td>\n      <td>0.0</td>\n      <td>12.253817</td>\n    </tr>\n    <tr>\n      <th>98138</th>\n      <td>79395</td>\n      <td>2017-08-14 21:36:30</td>\n      <td>2017-08-14 23:06:30</td>\n      <td>58.0</td>\n      <td>2017-08-14 21:33:09.446</td>\n      <td>0.0</td>\n      <td>3.342567</td>\n    </tr>\n  </tbody>\n</table>\n<p>98139 rows Ã— 7 columns</p>\n</div>\n```\n:::\n:::\n\n\n-   **egoid:** individual identifier\n\n-   **count_begin90:** starting time of measurement window of 90 minutes\n\n-   **time_fallsleep:** time of falling asleep for an egoid on a certain day\n\n-   **battery:** battery level at the closest measuring point before the starting point of measurement window, namely \"**count_begin90\"**\n\n-   **battery_time:** the measuring time point of battery level. We only maintain the observations with '**battery_time' that is within 30 minutes from 'time_fallsleep'** for the purpose of measurement accuracy\n\n-   **charging:** dummy indicating the charging status of smartphone at time 'battery_time' with **'1' for charging and '0' for unpluged**\n\n-   **binterval:** the time interval (minutes) between 'battery_time' and 'count_begin90'\n\nThe following table shows descriptive statistics:\n\n::: {.cell execution_count=2}\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>egoid</th>\n      <th>battery</th>\n      <th>charging</th>\n      <th>binterval</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>count</th>\n      <td>98139.000000</td>\n      <td>98139.000000</td>\n      <td>98139.000000</td>\n      <td>98139.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>57127.139415</td>\n      <td>49.343034</td>\n      <td>0.164756</td>\n      <td>6.254161</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>26012.535822</td>\n      <td>26.435679</td>\n      <td>0.370962</td>\n      <td>6.772801</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>10237.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000050</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>33657.000000</td>\n      <td>28.000000</td>\n      <td>0.000000</td>\n      <td>0.980508</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>59207.000000</td>\n      <td>47.000000</td>\n      <td>0.000000</td>\n      <td>3.652283</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>79834.000000</td>\n      <td>70.000000</td>\n      <td>0.000000</td>\n      <td>9.367075</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>99978.000000</td>\n      <td>100.000000</td>\n      <td>1.000000</td>\n      <td>29.998683</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nWe speculate that the charging status is positively associated with screen time as one may need to charge his/her phone if the user anticipate that he/she was going to use smartphone intensively in the next 90 minutes. To examine whether \"charging\" could work as and instrument variable for 'screen time\", we first regress \"screen time\" on \"charging\". Since our earlier results show that screen time has U-shape impact on sleep debt, we divide the data into two subgroups based on the turning point of screen time.\n\nHere is the descriptive statistics for observations before turning point:\n\n::: {.cell execution_count=3}\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>egoid</th>\n      <th>screen_time</th>\n      <th>unlock</th>\n      <th>message</th>\n      <th>battery</th>\n      <th>charging</th>\n      <th>binterval</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>count</th>\n      <td>80511.000000</td>\n      <td>80511.000000</td>\n      <td>80511.000000</td>\n      <td>80511.000000</td>\n      <td>80511.000000</td>\n      <td>80511.000000</td>\n      <td>80511.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>56850.092050</td>\n      <td>17.951463</td>\n      <td>8.092577</td>\n      <td>5.155929</td>\n      <td>49.134230</td>\n      <td>0.154761</td>\n      <td>6.545861</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>25967.765281</td>\n      <td>13.851931</td>\n      <td>6.250020</td>\n      <td>7.506372</td>\n      <td>26.198101</td>\n      <td>0.361679</td>\n      <td>6.853579</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>10237.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000050</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>33239.000000</td>\n      <td>5.983333</td>\n      <td>3.000000</td>\n      <td>0.000000</td>\n      <td>28.000000</td>\n      <td>0.000000</td>\n      <td>1.076942</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>58793.000000</td>\n      <td>15.500000</td>\n      <td>7.000000</td>\n      <td>0.000000</td>\n      <td>47.000000</td>\n      <td>0.000000</td>\n      <td>4.065583</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>79731.000000</td>\n      <td>28.134042</td>\n      <td>11.000000</td>\n      <td>9.000000</td>\n      <td>70.000000</td>\n      <td>0.000000</td>\n      <td>9.864742</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>99978.000000</td>\n      <td>50.000000</td>\n      <td>23.500000</td>\n      <td>20.000000</td>\n      <td>100.000000</td>\n      <td>1.000000</td>\n      <td>29.998683</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nThe following table shows the descriptive statistics for observations after turning point:\n\n::: {.cell execution_count=4}\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>egoid</th>\n      <th>screen_time</th>\n      <th>unlock</th>\n      <th>message</th>\n      <th>battery</th>\n      <th>charging</th>\n      <th>binterval</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>count</th>\n      <td>14055.000000</td>\n      <td>14055.000000</td>\n      <td>14055.000000</td>\n      <td>14055.000000</td>\n      <td>14055.000000</td>\n      <td>14055.000000</td>\n      <td>14055.000000</td>\n    </tr>\n    <tr>\n      <th>mean</th>\n      <td>58697.819708</td>\n      <td>66.255860</td>\n      <td>7.725471</td>\n      <td>6.411455</td>\n      <td>48.653931</td>\n      <td>0.216435</td>\n      <td>4.764225</td>\n    </tr>\n    <tr>\n      <th>std</th>\n      <td>25430.525461</td>\n      <td>11.386626</td>\n      <td>5.974955</td>\n      <td>8.400167</td>\n      <td>27.012879</td>\n      <td>0.411829</td>\n      <td>6.084014</td>\n    </tr>\n    <tr>\n      <th>min</th>\n      <td>10237.000000</td>\n      <td>50.000367</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000000</td>\n      <td>0.000150</td>\n    </tr>\n    <tr>\n      <th>25%</th>\n      <td>36552.000000</td>\n      <td>56.385025</td>\n      <td>3.000000</td>\n      <td>0.000000</td>\n      <td>27.000000</td>\n      <td>0.000000</td>\n      <td>0.740100</td>\n    </tr>\n    <tr>\n      <th>50%</th>\n      <td>62617.000000</td>\n      <td>64.366717</td>\n      <td>6.000000</td>\n      <td>0.000000</td>\n      <td>46.000000</td>\n      <td>0.000000</td>\n      <td>2.174800</td>\n    </tr>\n    <tr>\n      <th>75%</th>\n      <td>79834.000000</td>\n      <td>75.172225</td>\n      <td>11.000000</td>\n      <td>16.000000</td>\n      <td>70.000000</td>\n      <td>0.000000</td>\n      <td>6.267542</td>\n    </tr>\n    <tr>\n      <th>max</th>\n      <td>99978.000000</td>\n      <td>89.994933</td>\n      <td>23.500000</td>\n      <td>20.000000</td>\n      <td>100.000000</td>\n      <td>1.000000</td>\n      <td>29.941917</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\n\n\n## Empiricial Strategy\n\n### Screen Time \\< Turning Point\n\nWe first check whether charging status could work as an instrument variable for screen time for observations with screen time \\< turning point (50 minutes)\n\n\n\n### **First Stage: Test the Relevance of the Instrument**\n\n::: {.cell execution_count=7}\n``` {.python .cell-code .code-overflow-wrap code-fold=\"false\"}\n%%stata\n\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time iimessage unlock\nglobal Call_Control call duration length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour c.studyweeks#id\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nregress screen_time charging battery $fe $Fitness_Control $Other_Control $Call_Control message unlock i.egoid\n```\n:::\n\n\n::: {.cell execution_count=8}\n``` {.python .cell-code .code-overflow-wrap code-fold=\"false\"}\n%%stata\n\nesttab, keep(charging battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n. \n. esttab, keep(charging battery message unlock) stats(N r2 F p, labels(\"Observa\n> tions\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n\n----------------------------\n                      (1)   \n              screen_time   \n----------------------------\ncharging            0.741***\n                   (6.30)   \n\nbattery         -0.000379   \n                  (-0.22)   \n\nmessage             0.107***\n                  (13.04)   \n\nunlock              0.914***\n                 (111.99)   \n----------------------------\nObservations        80511   \nR-squared           0.299   \nF statistic         35.34   \nProb > F                0   \n----------------------------\nt statistics in parentheses\n* p<0.05, ** p<0.01, *** p<0.001\n\n. \n```\n:::\n:::\n\n\nThe results shows charging status is positively associated with screen time. Moreover, the F-statistics of 35.34 indicate that 'charging' is a valid IV for screen time.\n\n#### **IV Estimation**\n\n::: {.cell execution_count=9}\n``` {.python .cell-code .code-overflow-wrap code-fold=\"false\"}\n%%stata\n\nivregress 2sls sleep_debt (screen_time = charging) $fe $Fitness_Control $Other_Control $Call_Control i.egoid message unlock battery\n```\n:::\n\n\n::: {.cell execution_count=10}\n``` {.python .cell-code .code-overflow-wrap code-fold=\"false\"}\n%%stata\n\nesttab, keep(screen_time battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n. \n. esttab, keep(screen_time battery message unlock) stats(N r2 F p, labels(\"Obse\n> rvations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n\n----------------------------\n                      (1)   \n               sleep_debt   \n----------------------------\nscreen_time        -2.845** \n                  (-3.13)   \n\nmessage             0.134   \n                   (1.24)   \n\nunlock              2.071*  \n                   (2.50)   \n\nbattery            0.0817***\n                   (8.33)   \n----------------------------\nObservations        80511   \nR-squared           0.519   \nF statistic                 \nProb > F                0   \n----------------------------\nt statistics in parentheses\n* p<0.05, ** p<0.01, *** p<0.001\n\n. \n```\n:::\n:::\n\n\nThe IV estimation results suggest that screen time reduces sleep debt when screen time \\< turning point. \\### Screen Time \\> Turning Point\n\nWe first check whether charging status could work as an instrument variable for screen time for observations with screen time \\< turning point (50 minutes)\n\n\n\n### **First Stage: Test the Relevance of the Instrument**\n\n::: {.cell execution_count=12}\n``` {.python .cell-code .code-overflow-wrap code-fold=\"false\"}\n%%stata\n\nglobal id egoid\nglobal t date2\nglobal ylist sleep_debt\nglobal mainIV  c.screen_time##c.screen_time iimessage unlock\nglobal Call_Control call duration length bytes\nglobal Fitness_Control steps100 floors sedentaryminutes lightlyactiveminutes fairlyactiveminutes veryactiveminutes lowrangecal100 fatburncal100 cardiocal100 peakcal100\nglobal Other_Control naps naps_dur light_exposure insession##weekday##time_wakeuphour c.studyweeks#id\nglobal fe i.studyweeks\n\n*Set data as panel data\nsort $id $t\nxtset $id $t\n\nregress screen_time charging battery $fe $Fitness_Control $Other_Control $Call_Control message unlock i.egoid\n```\n:::\n\n\n::: {.cell execution_count=13}\n``` {.python .cell-code .code-overflow-wrap code-fold=\"false\"}\n%%stata\n\nesttab, keep(charging battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n. \n. esttab, keep(charging battery message unlock) stats(N r2 F p, labels(\"Observa\n> tions\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n\n----------------------------\n                      (1)   \n              screen_time   \n----------------------------\ncharging            0.895***\n                   (4.14)   \n\nbattery          -0.00777*  \n                  (-2.22)   \n\nmessage           -0.0281   \n                  (-1.84)   \n\nunlock             -0.907***\n                 (-51.54)   \n----------------------------\nObservations        14055   \nR-squared           0.280   \nF statistic         6.012   \nProb > F                0   \n----------------------------\nt statistics in parentheses\n* p<0.05, ** p<0.01, *** p<0.001\n\n. \n```\n:::\n:::\n\n\nThe results shows charging status is positively associated with screen time, indicating that 'charging' is a valid IV for screen time.\n\n#### **IV Estimation**\n\n::: {.cell execution_count=14}\n``` {.python .cell-code .code-overflow-wrap code-fold=\"false\"}\n%%stata\n\nivregress 2sls sleep_debt (screen_time = charging) $fe $Fitness_Control $Other_Control $Call_Control i.egoid message unlock battery\n```\n:::\n\n\n::: {.cell execution_count=15}\n``` {.python .cell-code .code-overflow-wrap code-fold=\"false\"}\n%%stata\n\nesttab, keep(screen_time battery message unlock) stats(N r2 F p, labels(\"Observations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n\n. \n. esttab, keep(screen_time battery message unlock) stats(N r2 F p, labels(\"Obse\n> rvations\" \"R-squared\" \"F statistic\" \"Prob > F\")) replace\n\n----------------------------\n                      (1)   \n               sleep_debt   \n----------------------------\nscreen_time         2.901   \n                   (1.89)   \n\nmessage            -0.545***\n                  (-5.14)   \n\nunlock              2.392   \n                   (1.70)   \n\nbattery            0.0621*  \n                   (2.43)   \n----------------------------\nObservations        14055   \nR-squared           0.519   \nF statistic                 \nProb > F                0   \n----------------------------\nt statistics in parentheses\n* p<0.05, ** p<0.01, *** p<0.001\n\n. \n```\n:::\n:::\n\n\nThe estimation for screen time is significant when p\\<0.1 although not significant when p\\<0.05. The IV estimation results suggest that screen time increases sleep debt when screen time \\> turning point.\n\n",
    "supporting": [
      "IV_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js\" integrity=\"sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js\" integrity=\"sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==\" crossorigin=\"anonymous\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}